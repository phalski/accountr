<?xml version="1.0" encoding="UTF-8"?>
<ui:composition template="/META-INF/template/page.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:b="http://bootsfaces.net/ui">

<ui:param name="title" value="#{msg['page.accounts.title']}"/>

<ui:define name="head">
    <f:metadata>
        <f:viewParam name="search" value="#{accountBean.search}" />
        <f:viewAction action="#{accountBean.initializeList}" />
    </f:metadata>
</ui:define>

<ui:define name="content">
    <b:container>
        <b:row>
            <b:column>
                <h1>
                    <h:outputText value="#{msg['page.accounts.title']}"/>
                </h1>
            </b:column>
        </b:row>
        <b:row>
            <b:column>
                <p>
                    <h:form class="form-inline">
                        <div class="form-group">
                            <b:button look="primary" value="Add" outcome="account-form">
                                <f:param name="accountId" value="#{accountBean.account.id}"/>
                            </b:button>
                        </div>
                        <div class="pull-right">
                        <div class="form-group">
                            <h:inputText styleClass="form-control" placeholder="#{msg['page.accounts.search.placeholder']}"
                                         value="#{accountBean.search}"/>
                            <b:commandButton action="#{accountBean.doSearch}" value="#{msg['action.search']}"/>
                        </div>
                        </div>
                    </h:form>
                </p>
            </b:column>
        </b:row>
        <b:row>
            <ui:repeat value="#{accountBean.accountList}" var="account">
                <b:column span="4">
                    <b:panel collapsible="false">
                            <h:form styleClass="pull-right">
                                <h:link outcome="account-form">
                                <f:param name="accountId" value="#{account.id}"/>
                                <i class="glyphicon glyphicon-edit"/>
                            </h:link>
                            <h:outputText value=" "/>
                            <h:commandLink action="#{accountBean.doDelete(account)}">
                                <i class="glyphicon glyphicon-remove"/>
                            </h:commandLink>
                            </h:form>
                        <h2>
                        <h:link outcome="account" value="#{account.name}">
                            <f:param name="accountId" value="#{account.id}"/>
                        </h:link>
                        </h2>

                        <p>
                            <h:outputText value="#{account.description}"/>
                        </p>

                    </b:panel>
                </b:column>
            </ui:repeat>
        </b:row>
    </b:container>

</ui:define>

</ui:composition>
